<!DOCTYPE html>
<html>

<!-- head -->
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CS 360/560 Spring 2019</title>

  <!-- bulma 0.7.2 and font awesome v5.7.1 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css" integrity="sha256-2pUeJf+y0ltRPSbKOeJh09ipQFYxUdct5nTY6GAXswA=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>

<!-- body -->
<body>

  <!-- header -->
  <section class="hero is-primary is-bold">
    <!-- todo: change assignment and name -->
    <div class="hero-body">
      <div class="container">
        <h1 class="title">
          Visualization 1
        </h1>
        <h2 class="subtitle">
          Darianne Lopez
        </h2>
      </div>
    </div>

    <!-- todo: change navigation as needed -->
    <div class="hero-foot">
      <div class="container">
        <nav class="navbar" role="navigation" aria-label="main navigation">

          <div class="navbar-brand">
            <a class="navbar-item" href="index.html">
              <span class="icon">
                <i class="fas fa-home"></i>
              </span>
              <span>Home</span>
            </a>
          </div>

          <div id="main-navbar" class="navbar-brand">
            <a class="navbar-item" href="data_processing.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Data/Processing</span>
            </a>
          </div>

          <div id="main-navbar" class="navbar-brand">
              <a class="navbar-item" href="Darianne.html">
                <span class="icon">
                  <i class="fas fa-chart-area"></i>
                </span>
                <span>Visualization 1</span>
              </a>
            </div>
  
            <div id="main-navbar" class="navbar-brand">
              <a class="navbar-item" href="Emmit.html">
                <span class="icon">
                  <i class="fas fa-chart-area"></i>
                </span>
                <span>Visualization 2</span>
              </a>
            </div>
  
            <div id="main-navbar" class="navbar-brand">
              <a class="navbar-item" href="Olivia.html">
                <span class="icon">
                  <i class="fas fa-chart-area"></i>
                </span>
                <span>Visualization 3</span>
              </a>
            </div>

          <div id="main-navbar" class="navbar-brand">
            <a class="navbar-item" href="prototypes.html">
              <span class="icon">
                <i class="fas fa-chart-area"></i>
              </span>
              <span>Prototypes</span>
            </a>
          </div>

          <div class="navbar-end">
            <a class="navbar-item" href="team_about.html">
              <span class="icon">
                <i class="fas fa-info-circle"></i>
              </span>
              <span>Team/About</span>
            </a>

        </nav>
      </div>
    </div>
  </section>

  <!-- todo: add sections as necessary -->
  <section class="section">
    <div class="container content">
      <!-- todo: modify as necessary (or move visualizations to separate pages) -->
      <h2>Visualization 1</h2>
    
      <!--<script src="Darianne_vis.js"></script>-->

      <svg id="vis1" style="background-color: whitesmoke; border: 1px solid black;">
        </svg>

        <script src="Darianne_vis.js"></script> 

        <script type="text/javascript"> </script>
      
      <!-- <script>
      
      var margin = {top: 20, right: 20, bottom: 30, left: 50},
     width = 960 - margin.left - margin.right,
     height = 500 - margin.top - margin.bottom;


// date of incident
var parseDate = d3.time.format("%b/%d/%y").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category20();

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    //.ticks(11, "s");

var area = d3.svg.area()
    .x(function(d) { return x(d.date); })
    .y0(function(d) { return y(d.y0); })
    .y1(function(d) { return y(d.y0 + d.y); });

var stack = d3.layout.stack()
    .values(function(d) { return d.values; });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    svg.append("text")
    .attr("x", 0)
    .attr("y", -40)
    .attr("dy", "0.71em")
    .attr("fill", "#000")
    .text("Top 5 Incident Types (December 2018 - February 2019)")
    .style("font", "23px avenir")
    .style("fill", "#000000");

    svg.append("text")
    .attr("x", 0)
    .attr("y", 402)
    .attr("dy", "0em")
    .style("font", "12px avenir")
    .style("fill", "#000000")
    .text("The plot of count of Call Type for Call Date Day. Color shows details about Call Type. The view is filtered on Call Type, which has multiple members selected.");

    d3.csv("call_type_data.csv", function(error, data) {
   
        color.domain(d3.keys(data[0]).filter(function(key) {return key !== "date"; }));
    
        data.forEach(function(d) {  
            d.date = parseDate(d.date);
        }); 

        var browsers = stack(color.domain().map(function(name) {
            return {
                name: name,
                values: data.map(function(d) {
                    return {date: d.date, y:d[name] * 1};
                })
            };
        }));

        // Find the value of the date with the most incidents
        var maxDateVal = d3.max(data, function(d) {
            var vals = d3.keys(d).map(
                function(key){
                    return key !== "date" ? d[key] : 0 
                }
                );
                return d3.sum(vals);
        });

        // Set scale for axis
        x.domain(d3.extent(data, function(d) { return d.date; }));
        y.domain([0, maxDateVal])

        var browser = svg.selectAll(".browser")
            .data(browsers)
            .enter().append("g")
            .attr("class", "browser");

        browser.append("path")
            .attr("class", "area")
            .attr("d", function(d) { return area(d.values); })
            .style("fill", function(d,i) { 
                    return color(d.name); });
    
        browser.append("text")
            .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
            .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.y0 + d.value.y / 2) + ")"; })
            .attr("x", -6)
            .attr("dy", ".35em")
            .text(function(d) { 
                return d.name; });

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis).append("text")
            .attr("x", 350)
            .attr("y", 36)
            .attr("fill", "#000")
            .text("Date of Incident")
            .style("font-weight", "bold");

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("x", -250)
            .attr("y", -40)
            .attr("dy", "0.3408em")
            .attr("fill", "#000")
            .text("Number of Incidents")
            .style("font-weight", "bold");  
    
        // Creating legend
        var legend = svg.selectAll(".legend")
            .data(color.domain()).enter()
            .append("g")
            .attr("class","legend")
            .attr("transform", "translate(" + (width +20) + "," + 0+ ")");
    
        // Creates color boxes in legend
        legend.append("rect")
            .attr("x", 0) 
            .attr("y", function(d, i) { return 20 * i; })
            .attr("width", 10)
            .attr("height", 10)
            .style("fill", function(d, i) {
                return get_colors(i);}); 
    
        // Adds text to the legend
        legend.append("text")
            .attr("x", 20) 
            .attr("dy", "0.75em")
            .attr("y", function(d, i) { return 20 * i; })
            .text(function(d) {return d});
    
        legend.append("text")
            .attr("x",0) 
            .attr("y",-10)
            .text("Incident Call Type");

    });

      </script> -->

      <!--
      <h3>Interpretation</h3>

      <p>
        If appropriate, provide a brief discussion of how to interpret this visualization (e.g. how the data is encoded) and how to interact with this visualization. Some of this discussion may not be necessary depending on the legends provided with the visualization.
      </p>

      <h3>Discussion</h3>

      <p>
        If appropriate, provide a brief discussion of the primary goal and findings of the visualization, any challenges encountered creating the visualization, and any other context as required by the assignment.
      </p>

      <h3>Credit</h3>

      <p>
        If appropriate, provide credit for the dataset, any code used, and design inspirations here. Unsufficient discussion here is a violation of the <a href="/syllabus.html#cheating-policy">academic honesty policy</a> and may result in an F grade for the assignment or the <em>entire</em> course.
      </p>
      -->
    </div>
  </section>

  <!-- separator between sections -->
  <hr class="container">

  <!-- about section -->
  <section class="section">
    <div class="container content">
      <h2 id="about">
        About Me
      </h2>

      <div class="media">
        <div class="media-left">
          <p class="image is-128x128">
            <img src="IMG_8095.png">
          </p>
        </div>

        <div class="media-content">
            <p>
              <strong>Darianne Lopez</strong>
              <br/>
              Hi! I'm Darianne and I'm a senior data science major at the University of San Francisco.
              I'm originally from El Paso, Texas but came to SF to get my undergrad. I really enjoy going to the parks,
              beaches, and trying out new restaurants whenever I'm not deep in analyzing some data. I really hope to be a data
              scientist someday and gain new experiences working in different cities across the country.
              <br/>

              <a href="https://github.com/darianne-lopez">
                <span class="fab fa-github"></span>
                <span>Github</span>
              </a>
              &bullet;
              <a href="https://www.linkedin.com/in/darianne-lopez-ab9580104/">
                <span class="fab fa-linkedin"></span>
                <span>LinkedIn</span>
              </a>
            </p>

        </div>
      </div>

    </div>
  </section>

  <!-- footer -->
  <footer class="footer">
    <div class="content has-text-centered">
      <small>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span>Back to Top</span>
        </a>
        <br/>
        <a href="/">CS 360/560 Data Visualization</a>
        &bullet;
        <a href="https://myusf.usfca.edu/arts-sciences/computer-science">Department of Computer Science</a>
        &bullet;
        <a href="https://www.usfca.edu/">University of San Franciscio</a>
      </small>
    </div>
  </footer>

<!-- end body and html -->
</body>
</html>
